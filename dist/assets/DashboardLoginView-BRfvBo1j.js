import{g as l,z as g,y as w,_ as h,c as d,a as r,p as v,l as b,q as p,v as c,t as f,j as k,o as u}from"./index-CRQW_Mv0.js";import{u as y}from"./userStore-Cg524SFF.js";const x={setup(){const t=l(""),o=l(""),a=l(""),e=w(),i=y();return{username:t,password:o,error:a,login:async()=>{try{const n=(await g.post("https://api.maximilian-decker.com/api/auth/login",{username:t.value,password:o.value})).data.token;if(!n)throw new Error("Kein Token erhalten");localStorage.setItem("dashboard",n),console.log("Token gespeichert:",n),console.log("Token nach dem Speichern:",localStorage.getItem("dashboard")),await i.fetchUserData(t.value),await e.push("/dashboard")}catch(s){console.error("Login-Fehler:",s),a.value="Falsches Passwort oder Benutzername. Bitte erneut versuchen."}}}}},_={class:"login-view"},S={class:"login-card"},B={key:0,class:"alert alert-danger"};function D(t,o,a,e,i,m){return u(),d("div",_,[r("div",S,[o[4]||(o[4]=r("img",{src:v,alt:""},null,-1)),o[5]||(o[5]=r("h2",null,"Dashboard Login",-1)),r("form",{class:"login-form",onSubmit:o[2]||(o[2]=b((...s)=>e.login&&e.login(...s),["prevent"]))},[p(r("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>e.username=s),class:"login-input",type:"text",placeholder:"Username"},null,512),[[c,e.username]]),p(r("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>e.password=s),class:"login-input",type:"password",placeholder:"Passwort"},null,512),[[c,e.password]]),o[3]||(o[3]=r("button",{class:"btn btn-primary",type:"submit"},"Login",-1))],32),e.error?(u(),d("div",B,f(e.error),1)):k("",!0)])])}const T=h(x,[["render",D],["__scopeId","data-v-bd4b145b"]]);export{T as default};
