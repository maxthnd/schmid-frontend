import{d as h,e as m,o as r,c as d,l as p,a as t,F as f,r as k,t as l,_,k as u,f as v,s as y,b,u as S,x as M}from"./index-7ecuNolg.js";import{u as z}from"./userStore-VhcEDvpT.js";const $={class:"dashboard-jobboard"},w={class:"jobboard-body"},T={class:"table table-striped table-hover"},B={class:"job-elements"},N=["onClick"],K=["onClick"],x=h({__name:"JobBoard",setup(c){const o=m([{id:1,title:"Softwareentwickler",type:"Vollzeit",location:"Stein a.K."},{id:2,title:"Marketing Manager",type:"Teilzeit",location:"Stein a.K."},{id:2,title:"Marketing Manager",type:"Teilzeit",location:"Stein a.K."},{id:2,title:"Marketing Manager",type:"Teilzeit",location:"Stein a.K."},{id:2,title:"Marketing Manager",type:"Teilzeit",location:"Stein a.K."},{id:2,title:"Marketing Manager",type:"Teilzeit",location:"Stein a.K."},{id:2,title:"Marketing Manager",type:"Teilzeit",location:"Stein a.K."},{id:3,title:"Auszubildender",type:"Ausbildung",location:"Stein a.K."}]),n=s=>{console.log("Job bearbeiten:",s)},a=s=>{o.value=o.value.filter(e=>e.id!==s)};return(s,e)=>(r(),d("div",$,[e[1]||(e[1]=p('<div class="jobboard-header" data-v-d90d72cc><div class="jobboard-title" data-v-d90d72cc><h4 data-v-d90d72cc>Aktuelle Stellenanzeigen</h4></div><div class="jobboard-elements" data-v-d90d72cc><button type="button" class="btn btn-success" data-v-d90d72cc>Hinzuf√ºgen</button><button type="button" class="btn btn-danger" data-v-d90d72cc>Alle Entfernen</button></div></div>',1)),t("div",w,[t("table",T,[e[0]||(e[0]=t("thead",null,[t("tr",null,[t("th",null,"Stelle"),t("th",null,"Art der Besch√§ftigung"),t("th",null,"Ort"),t("th",null,"Aktionen")])],-1)),t("tbody",null,[(r(!0),d(f,null,k(o.value,i=>(r(),d("tr",{key:i.id},[t("td",null,l(i.title),1),t("td",null,l(i.type),1),t("td",null,l(i.location),1),t("td",B,[t("button",{class:"btn btn-primary btn-sm",onClick:g=>n(i.id)},"Bearbeiten",8,N),t("button",{class:"btn btn-danger btn-sm",onClick:g=>a(i.id)},"L√∂schen",8,K)])]))),128))])])])]))}}),A=_(x,[["__scopeId","data-v-d90d72cc"]]),I={setup(){const c=z(),o=m(null),n=u(()=>c.getUser),a=u(()=>{var e;return((e=n.value)==null?void 0:e.firstName)??""}),s=u(()=>{var e;return((e=n.value)==null?void 0:e.lastName)??""});return v(()=>{n.value||c.fetchUserData().catch(e=>{o.value="Fehler beim Laden der Benutzerdaten.",console.error(e)})}),{user:n,firstName:a,lastName:s,errorMessage:o}}},L={class:"welcome-header"},V={class:"welcome-title"},C={key:0,class:"dashboard-title"},J={key:1,class:"error-message"},D={key:2,class:"loading-message"};function E(c,o,n,a,s,e){return r(),d("div",L,[t("div",V,[a.user?(r(),d("h1",C,"üëã Willkommen, "+l(a.user.firstName)+" "+l(a.user.lastName)+"!",1)):a.errorMessage?(r(),d("div",J,l(a.errorMessage),1)):(r(),d("div",D,"Lade Benutzerdaten..."))])])}const F=_(I,[["render",E],["__scopeId","data-v-d6e1ecf4"]]),U={class:"dashboard-view"},j={class:"dashboard-content"},H={class:"dashboard-header"},W={class:"dashboard-body"},O=h({__name:"DashboardView",setup(c){const o=S(),n=async()=>{const e=localStorage.getItem("dashboard");if(!e)o.push("/login");else try{(await M.get("/api/auth/validate-token",{headers:{Authorization:`Bearer ${e}`}})).data.valid||(localStorage.removeItem("dashboard"),o.push("/login"))}catch{localStorage.removeItem("dashboard"),o.push("/login")}},a=()=>{clearTimeout(s),s=setTimeout(()=>{localStorage.removeItem("dashboard"),o.push("/login")},72e5)};let s;return v(()=>{n(),window.addEventListener("mousemove",a),a()}),y(()=>{window.removeEventListener("mousemove",a),clearTimeout(s)}),(e,i)=>(r(),d("div",U,[t("div",j,[t("div",H,[b(F)]),t("div",W,[b(A)])])]))}}),G=_(O,[["__scopeId","data-v-733042c3"]]);export{G as default};
