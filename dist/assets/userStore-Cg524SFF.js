var l=Object.defineProperty;var u=(s,e,t)=>e in s?l(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var a=(s,e,t)=>u(s,typeof e!="symbol"?e+"":e,t);import{A as c,z as m}from"./index-CRQW_Mv0.js";class h{constructor(e,t,n="",r="",o="",i=[]){a(this,"id");a(this,"username");a(this,"firstName");a(this,"lastName");a(this,"email");a(this,"roles");this.id=e,this.username=t,this.firstName=n,this.lastName=r,this.email=o,this.roles=i}}const p=c("user",{state:()=>({user:null}),actions:{setUser(s){this.user=s},logout(){this.user=null,localStorage.removeItem("dashboard")},async fetchUserData(s){try{const e=localStorage.getItem("dashboard");if(!e){console.error("Kein Token gefunden");return}const t=`https://api.maximilian-decker.com/api/user?username=${s}`;console.log("Sende Anfrage an:",t);const r=(await m.get(t,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data;console.log("Benutzerdaten erhalten:",r);const o=new h(r.id,r.username,r.firstName||"",r.lastName||"",r.email||"",r.roles||[]);this.setUser(o),console.log("Benutzer im Store gesetzt:",this.user)}catch(e){throw console.error("Fehler beim Laden der Benutzerdaten:",e),e}}},getters:{isAuthenticated:s=>!!s.user,getUser:s=>s.user}});export{p as u};
