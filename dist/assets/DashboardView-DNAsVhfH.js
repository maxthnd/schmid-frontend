import{u as p}from"./userStore-C7XhaTn5.js";import{e as h,j as u,f as m,_,o as r,c as d,a as t,t as l,d as v,k as f,F as k,r as y,q as S,b,u as M,s as z}from"./index-BJ-k2ZzD.js";const $={setup(){const c=p(),o=h(null),n=u(()=>c.getUser),a=u(()=>{var e;return((e=n.value)==null?void 0:e.firstName)??""}),s=u(()=>{var e;return((e=n.value)==null?void 0:e.lastName)??""});return m(()=>{n.value||c.fetchUserData().catch(e=>{o.value="Fehler beim Laden der Benutzerdaten.",console.error(e)})}),{user:n,firstName:a,lastName:s,errorMessage:o}}},w={class:"welcome-header"},T={class:"welcome-title"},B={key:0,class:"dashboard-title"},N={key:1,class:"error-message"},K={key:2,class:"loading-message"};function A(c,o,n,a,s,e){return r(),d("div",w,[t("div",T,[a.user?(r(),d("h1",B,"üëã Willkommen, "+l(a.user.firstName)+" "+l(a.user.lastName)+"!",1)):a.errorMessage?(r(),d("div",N,l(a.errorMessage),1)):(r(),d("div",K,"Lade Benutzerdaten..."))])])}const I=_($,[["render",A],["__scopeId","data-v-5f907569"]]),x={class:"dashboard-jobboard"},L={class:"jobboard-body"},V={class:"table table-striped table-hover"},C={class:"job-elements"},J=["onClick"],D=["onClick"],E=v({__name:"JobBoard",setup(c){const o=h([{id:1,title:"Softwareentwickler",type:"Vollzeit",location:"Stein a.K."},{id:2,title:"Marketing Manager",type:"Teilzeit",location:"Stein a.K."},{id:2,title:"Marketing Manager",type:"Teilzeit",location:"Stein a.K."},{id:2,title:"Marketing Manager",type:"Teilzeit",location:"Stein a.K."},{id:2,title:"Marketing Manager",type:"Teilzeit",location:"Stein a.K."},{id:2,title:"Marketing Manager",type:"Teilzeit",location:"Stein a.K."},{id:2,title:"Marketing Manager",type:"Teilzeit",location:"Stein a.K."},{id:3,title:"Auszubildender",type:"Ausbildung",location:"Stein a.K."}]),n=s=>{console.log("Job bearbeiten:",s)},a=s=>{o.value=o.value.filter(e=>e.id!==s)};return(s,e)=>(r(),d("div",x,[e[1]||(e[1]=f('<div class="jobboard-header" data-v-d90d72cc><div class="jobboard-title" data-v-d90d72cc><h4 data-v-d90d72cc>Aktuelle Stellenanzeigen</h4></div><div class="jobboard-elements" data-v-d90d72cc><button type="button" class="btn btn-success" data-v-d90d72cc>Hinzuf√ºgen</button><button type="button" class="btn btn-danger" data-v-d90d72cc>Alle Entfernen</button></div></div>',1)),t("div",L,[t("table",V,[e[0]||(e[0]=t("thead",null,[t("tr",null,[t("th",null,"Stelle"),t("th",null,"Art der Besch√§ftigung"),t("th",null,"Ort"),t("th",null,"Aktionen")])],-1)),t("tbody",null,[(r(!0),d(k,null,y(o.value,i=>(r(),d("tr",{key:i.id},[t("td",null,l(i.title),1),t("td",null,l(i.type),1),t("td",null,l(i.location),1),t("td",C,[t("button",{class:"btn btn-primary btn-sm",onClick:g=>n(i.id)},"Bearbeiten",8,J),t("button",{class:"btn btn-danger btn-sm",onClick:g=>a(i.id)},"L√∂schen",8,D)])]))),128))])])])]))}}),F=_(E,[["__scopeId","data-v-d90d72cc"]]),j={class:"dashboard-view"},U={class:"dashboard-content"},H={class:"dashboard-header"},W={class:"dashboard-body"},q=v({__name:"DashboardView",setup(c){const o=M(),n=async()=>{const e=localStorage.getItem("dashboard");if(!e)o.push("/login");else try{(await z.get("/api/auth/validate-token",{headers:{Authorization:`Bearer ${e}`}})).data.valid||(localStorage.removeItem("dashboard"),o.push("/login"))}catch{localStorage.removeItem("dashboard"),o.push("/login")}},a=()=>{clearTimeout(s),s=setTimeout(()=>{localStorage.removeItem("dashboard"),o.push("/login")},72e5)};let s;return m(()=>{n(),window.addEventListener("mousemove",a),a()}),S(()=>{window.removeEventListener("mousemove",a),clearTimeout(s)}),(e,i)=>(r(),d("div",j,[t("div",U,[t("div",H,[b(I)]),t("div",W,[b(F)])])]))}}),G=_(q,[["__scopeId","data-v-53f4197d"]]);export{G as default};
