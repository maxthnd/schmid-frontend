import{e as l,s as g,u as w,_ as h,c as d,a as t,l as v,w as f,m as p,v as u,t as b,i as k,o as c}from"./index-BJ-k2ZzD.js";import{u as y}from"./userStore-C7XhaTn5.js";const _={setup(){const r=l(""),o=l(""),a=l(""),e=w(),i=y();return{username:r,password:o,error:a,login:async()=>{try{const n=(await g.post("http://164.92.187.212:8080/api/auth/login",{username:r.value,password:o.value})).data.token;if(!n)throw new Error("Kein Token erhalten");localStorage.setItem("dashboard",n),console.log("Token gespeichert:",n),console.log("Token nach dem Speichern:",localStorage.getItem("dashboard")),await i.fetchUserData(r.value),await e.push("/dashboard")}catch(s){console.error("Login-Fehler:",s),a.value="Falsches Passwort oder Benutzername. Bitte erneut versuchen."}}}}},x={class:"login-view"},S={class:"login-card"},B={key:0,class:"alert alert-danger"};function D(r,o,a,e,i,m){return c(),d("div",x,[t("div",S,[o[4]||(o[4]=t("img",{src:v,alt:""},null,-1)),o[5]||(o[5]=t("h2",null,"Dashboard Login",-1)),t("form",{class:"login-form",onSubmit:o[2]||(o[2]=f((...s)=>e.login&&e.login(...s),["prevent"]))},[p(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>e.username=s),class:"login-input",type:"text",placeholder:"Username"},null,512),[[u,e.username]]),p(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>e.password=s),class:"login-input",type:"password",placeholder:"Passwort"},null,512),[[u,e.password]]),o[3]||(o[3]=t("button",{class:"btn btn-primary",type:"submit"},"Login",-1))],32),e.error?(c(),d("div",B,b(e.error),1)):k("",!0)])])}const T=h(_,[["render",D],["__scopeId","data-v-bd2c55eb"]]);export{T as default};
